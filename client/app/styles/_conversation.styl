/*
  Conversation

  -- List of collapsable message content
*/

.conversation
    padding 1em

    & > header
        display       flex
        align-items   flex-start
        margin-bottom 1em

        .fa-close
            order 1

        h3
            flex 1
            order 2

        nav
            order 3

        .btn-group
            float none

        .btn
            border           none
            color            basecolor
            background-color transparent
            text-shadow      none
            box-shadow       none

            &:hover
                color actioncolor

        // Mask the fullscreen toggle below 768px, because the conversation view
        // is always fullscreen for those resolutions.
        @media(max-width: 48em)
            .fullscreen
                display none


    &.enable
        display block

    .conversation-title
        margin 0
        font 20px/1.4 'Source Sans Pro', sans-serif
        color #444

    .more
        display block
        padding .5em 10px
        width 100%
        border none
        border-top 1px solid lightcolor
        font-size .875em
        background-color #f5f5f5
        color basecolor

        &:hover
            color orange

        &:active
            outline none

        i
            vertical-align middle
            padding 0 10px

    .message
        margin 0
        padding .5em 10px
        border 1px solid lightcolor
        border-bottom none
        border-radius 4px 4px 0 0
        box-shadow 0 3px 1px lightcolor
        background-color white
        transition margin 280ms ease-out

        &.active
            margin 1em 0
            border-bottom 1px solid lightcolor
            border-radius 4px

            // prevent first message from sliding down for no reason
            &:first-of-type
                margin-top 0

            header
                margin-bottom 1em

            .sender-avatar
                width 40px
                height 40px

            .infos
                margin-bottom 1em
                padding-bottom .5em
                border-bottom 1px solid lightcolor

                .addresses
                    display block !important

        &.isUnread
            font-weight: bold

        header
        footer
            font-size .875em

        header
            cursor pointer

        footer
            margin-top 1em
            padding-top .5em
            border-top 1px solid lightcolor

        .full-headers pre
            border 1px solid lightcolor
            border-radius 2px
            font-size .75em
            font-family "Source Code Pro", monospace
            background-color #f5f5f5

        iframe
            width 100%

        .fa-mail-reply
            color contrastcolor

        .sender-avatar
            float left
            margin 0 10px 0 0
            width 24px
            height 24px
            overflow hidden
            border-radius 2px

            img
                max-width 100%
                max-height 100%

        .infos
            position relative
            display flex
            flex-flow row wrap
            align-items center

            .addresses
                flex 1 1 55%
                min-height 1.63265em

                + .addresses
                    // Mask addresses (except from, 1st one) when message isnt
                    // active (so collpased)
                    display      none
                    // Set the "special wrapping trick" for flex-items
                    padding-left 100%
                    max-width    0
                    position     relative

                    .addresses-wrapper
                        position      absolute
                        left          0
                        width         100%
                        overflow      hidden
                        text-overflow ellipsis
                        white-space   nowrap

                a:hover
                    text-decoration none

            .participant
                color darkcolor

            .contact-address
                color       mediumcolor
                white-space nowrap

                i
                    padding 0 .2em

            .indicators i
                margin-left .5em

            .from
                order 1
            .indicators
                order       2
                display     flex
                align-items center
            .date
                order 3
            .to
                order 5
            .cc
                order 6
            .details
                order 4

            .metas
                margin-left 1em

        .fa-star
            color lightorange

        .infos [aria-expanded]
            position relative

            .btn
                padding 0
                color basecolor

                &:hover
                    color actioncolor

            .popup
                z-index 1
                position absolute
                top 100%
                right 0
                min-width 18em
                padding 0.5em 10px
                border 1px solid lightgrey
                border-radius 2px
                background white

                td
                    display table-cell
                    padding 0.3em
                    color darkcolor
                    font-size 1em
                    vertical-align baseline

            .label
                text-align right
                font-weight normal
                color mediumcolor

            [aria-hidden=true]
                display none

        .attachments .popup
                right .25em !important

        .alert-success
        .alert-info
        .alert-warning
        .alert-danger
            margin-bottom 1em
            padding .5em 10px
            border-radius 2px
            font-size .875em
            line-height 2em
            text-align center
            background lightgrey
            color grey
            border 0

        .btn-success
        .btn-info
        .btn-warning
        .btn-danger
            display inline-block
            margin-left .75em
            vertical-align baseline
            text-shadow none
            box-shadow none
            background-color lightblue
            border 0px
            color grey
            cursor pointer
            padding 5px
            outline 0

            &:hover
                background-color lightorange

        .attachments
            ul
                margin 0
                padding 0

            li
                margin 0.7em 0
                list-style-type none

            i
                display inline-block
                margin-right 0.3em

            img
                display inline-block
                margin-right .35em
                padding .2em
                vertical-align top
                border 1px solid lightcolor
                border-radius 2px

    .full-headers
        display none

    .with-headers
        .full-headers
            display block

    .att-preview
    .att-preview img
        padding 0.5em
    .att-preview button
        margin .5em

    #email-compose
        margin-top 2em
        padding-top 1em
        padding-bottom 1em
        border-top 1px solid #CCC
        border-bottom 1px solid #CCC
